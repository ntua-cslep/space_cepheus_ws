[global_config]
  suppress_multiple_term_dialog = True
  title_hide_sizetext = True
  

[keybindings]

[profiles]
  [[default]]
    use_custom_command = False
    exit_on_close = False

  # Generic ROS shell in /home/theo/cepheus_ws (host)
  [[ros-shell]]
    use_custom_command = True
    custom_command = bash -lc 'source /home/theo/ros_env.sh; exec bash'
    working_directory = /home/theo/cepheus_ws
    exit_on_close = False

  # INTERFACE: SSH to robot, wait for HOST roscore first, robot uses host master
[[ros-ssh-robot]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;INTERFACE\007"; while true; do echo ""; echo "=== Interface Menu ==="; echo "[ENTER] Start robot interface (ssh)"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting robot interface on robot... (Ctrl+C to stop)"; ssh -C -t cepheus@192.168.1.4 "bash -lc '\''source ~/robot_env_old.sh; cd ~/cepheus_ws; roslaunch cepheus_robot launch_cepheus_robot.launch'\''"; echo ""; echo "Robot interface stopped. Press ENTER to start again or [q] to quit."; done; exec bash'
  working_directory = /home/theo/cepheus_ws
  exit_on_close = False

  # VICON: host node
[[ros-vicon-bridge]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;VICON\007"; source /home/theo/ros_env_new.sh; while true; do echo ""; echo "=== Vicon Menu ==="; echo "[ENTER] Start vicon_bridge"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting vicon_bridge... (Ctrl+C to stop)"; roslaunch vicon_bridge vicon.launch; echo ""; echo "vicon_bridge stopped. Press ENTER to start again or [q] to quit."; done; exec bash'
  working_directory = /home/theo/cepheus_ws_v2
  exit_on_close = False

  # ROSCORE: host master
[[ros-roscore]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;ROSCORE\007"; source /home/theo/ros_env.sh; while true; do echo ""; echo "=== ROSCORE Menu ==="; echo "[ENTER] Start roscore"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting roscore... (Ctrl+C to stop)"; roscore; echo ""; echo "roscore stopped. Press ENTER to start again or [q] to quit."; done; exec bash'
  working_directory = /home/theo/cepheus_ws
  exit_on_close = False

  # RQT: wait for host roscore
[[ros-rqt-graph]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;RQT\007"; source /home/theo/ros_env.sh; while true; do echo ""; echo "=== rqt_graph Menu ==="; echo "[ENTER] Start rqt_graph"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting rqt_graph... (Ctrl+C to stop)"; rqt_graph; echo ""; echo "rqt_graph closed. Press ENTER to start again or [q] to quit."; done; exec bash'
  working_directory = /home/theo
  exit_on_close = False

  # PLOTJUGGLER: wait for host roscore, use rosrun
[[ros-plotjuggler]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;PLOTJUGGLER\007"; source /home/theo/ros_env.sh; while true; do echo ""; echo "=== PlotJuggler Menu ==="; echo "[ENTER] Start PlotJuggler"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting PlotJuggler... (Ctrl+C to stop)"; rosrun plotjuggler plotjuggler -l ~/Documents/arm_visualizer.xml; echo ""; echo "PlotJuggler closed. Press ENTER to start again or [q] to quit."; done; exec bash'
  working_directory = /home/theo
  exit_on_close = False

  # SAFEMOTOR shell
  [[ros-safemotor-shell]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;SAFEMOTOR\007"; source /home/theo/ros_env.sh; while true; do echo ""; echo "=== Safe Motor Menu ==="; echo "[ENTER] Run ./safeclose.sh"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Running ./safeclose.sh..."; ./safeclose.sh; echo ""; echo "safeclose.sh finished. Press ENTER to run again or [q] to quit."; done; exec bash'
  working_directory = /home/theo
  exit_on_close = False

  # EXPERIMENT shell
  [[ros-experiment-shell]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;EXPERIMENT\007"; while true; do echo ""; echo "=== Experiment Menu ==="; echo "[ENTER] Start experiment (exp_JointSpace on robot)"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting experiment on robot... (Ctrl+C to stop)"; ssh -C -t cepheus@192.168.1.4 "bash -lc '\''source ~/robot_env.sh; roslaunch exp_JointSpace exp_JointSpace.launch'\''"; echo ""; echo "Experiment stopped. Press ENTER to start again or [q] to quit."; done; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  # Simple robot shell (interactive ssh with robot env sourced)
  [[ros-robot-shell]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;ROBOT SHELL\007"; while true; do echo ""; echo "=== Robot Shell Menu ==="; echo "[ENTER] Open robot shell (ssh)"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Opening robot shell... (Ctrl+D to exit)"; ssh -C -t cepheus@192.168.1.4 "bash -lc '\''source ~/robot_env.sh; exec bash'\''"; echo ""; echo "Robot shell closed. Press ENTER to open again or [q] to quit."; done; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  # IMU node (robot)
  [[ros-imu-shell]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;IMU\007"; while true; do echo ""; echo "=== IMU Menu ==="; echo "[ENTER] Start xsens_mti_node.launch on robot"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting IMU node on robot... (Ctrl+C to stop)"; ssh -C -t cepheus@192.168.1.4 "bash -lc '\''source ~/robot_env_old.sh; roslaunch xsens_mti_driver xsens_mti_node.launch'\''"; echo ""; echo "IMU node stopped. Press ENTER to start again or [q] to quit."; done; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  # Force/torque sensor node (robot)
  [[ros-ft-sensor-shell]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;FT SENSOR\007"; while true; do echo ""; echo "=== Force/Torque Sensor Menu ==="; echo "[ENTER] Start ft_sensor.launch on robot"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Starting FT sensor node on robot... (Ctrl+C to stop)"; ssh -C -t cepheus@192.168.1.4 "bash -lc '\''source ~/robot_env.sh; roslaunch cepheus_bringup ft_sensor.launch'\''"; echo ""; echo "FT sensor node stopped. Press ENTER to start again or [q] to quit."; done; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  # Gripper serial nodes (robot)
  [[ros-gripper-serial-shell]]
    use_custom_command = True
    custom_command = bash -lc 'cd ~/cepheus_ws_v2/tools/terminator_setup/scripts && ./gripper_serial_menu.sh; echo "[gripper serial menu exited: $?]"; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  # Gripper control (host)
  [[ros-gripper-control-shell]]
    use_custom_command = True
    custom_command = bash -lc 'cd ~/cepheus_ws_v2/tools/terminator_setup/scripts && ./gripper_control_menu.sh; echo "[gripper control menu exited: $?]"; exec bash'
    exit_action = hold
    working_directory = /home/theo
    exit_on_close = False

  # Autosync shell
  [[ros-autosync-shell]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;AUTOSYNC\007"; source /home/theo/ros_env.sh; while true; do echo ""; echo "=== Autosync Menu ==="; echo "[ENTER] Run autosync_exp"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Running autosync_exp..."; autosync_exp; echo ""; echo "autosync_exp finished. Press ENTER to run again or [q] to quit."; done; exec bash'
    working_directory = /home/theo
    exit_on_close = False


  # PLOTTER / converter shell in /home/theo/cepheus_ws_v2/bags/converters
[[ros-converter-shell]]
  use_custom_command = True
  custom_command = bash -lc 'printf "\033]0;PLOTTER\007"; source /home/theo/ros_env.sh; cd /home/theo/cepheus_ws_v2/bags/converters; exec bash'
  working_directory = /home/theo
  exit_on_close = False


  # Network diagnostics profiles
  [[net-mtr]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;MTR\007"; mtr -n -i 1 192.168.1.4; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  [[net-nload]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;NLOAD\007"; nload; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  [[net-iperf-server]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;IPERF SERVER\007"; sleep 1; ssh -t -C cepheus@192.168.1.4 "iperf3 -s"; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  [[net-iperf-client]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;IPERF CLIENT\007"; while true; do echo ""; echo "=== Network Test Menu ==="; echo "[ENTER] Run 3-second UDP test"; echo "[q] Quit this menu"; read -n1 key; if [[ "$key" == "q" ]]; then break; fi; echo ""; echo "Running 3-second UDP test to 192.168.1.4..."; iperf3 -u -c 192.168.1.4 -b 5M -t 3; echo ""; echo "Test completed. Press ENTER to run again or [q] to quit."; done; exec bash'
    working_directory = /home/theo
    exit_on_close = False

  [[net-btop]]
    use_custom_command = True
    custom_command = bash -lc 'printf "\033]0;BTOP\007"; btop; exec bash'
    working_directory = /home/theo
    exit_on_close = False


[layouts]
  [[cepheus_lab]]

    ###########################################
    # WINDOW 0 (Monitor 3 – LEFT) FULLSCREEN
    # 1280×1024 — Experiment control grid (5 rows × 2 columns)
    #
    # Row layout:
    # (1,1) ROSCORE (host)      | (1,2) IMU (robot)
    # (2,1) VICON (host)        | (2,2) FT SENSOR (robot)
    # (3,1) INTERFACE (robot)   | (3,2) GRIPPERS (robot)
    # (4,1) EXPERIMENT (robot)  | (4,2) SAFE MOTOR (host)
    # (5,1) ROBOT SHELL (robot) | (5,2) GRIP CTRL (host)
    ###########################################
    [[[window0]]]
      type = Window
      parent = ""
      size = 1280,1024
      position = 0:0
      fullscreen = True
      title = Cepheus – Experiment

      [[[hpaned_root]]]
        type = HPaned
        parent = window0
        ratio = 0.5

        ###################################
        # LEFT column (5 rows)
        ###################################
        [[[vleft_1]]]
          type = VPaned
          parent = hpaned_root
          ratio = 0.2

          [[[left_1]]]
            type = Terminal
            parent = vleft_1
            profile = ros-roscore              # (1,1) ROSCORE

          [[[vleft_2]]]
            type = VPaned
            parent = vleft_1
            ratio = 0.25

            [[[left_2]]]
              type = Terminal
              parent = vleft_2
              profile = ros-vicon-bridge       # (2,1) VICON

            [[[vleft_3]]]
              type = VPaned
              parent = vleft_2
              ratio = 0.333333

              [[[left_3]]]
                type = Terminal
                parent = vleft_3
                profile = ros-ssh-robot        # (3,1) INTERFACE

              [[[vleft_4]]]
                type = VPaned
                parent = vleft_3
                ratio = 0.5

                [[[left_4]]]
                  type = Terminal
                  parent = vleft_4
                  profile = ros-experiment-shell      # (4,1) EXPERIMENT

                [[[left_5]]]
                  type = Terminal
                  parent = vleft_4
                  profile = ros-robot-shell           # (5,1) ROBOT SHELL

        ###################################
        # RIGHT column (5 rows)
        ###################################
        [[[vright_1]]]
          type = VPaned
          parent = hpaned_root
          ratio = 0.2

          [[[right_1]]]
            type = Terminal
            parent = vright_1
            profile = ros-imu-shell            # (1,2) IMU

          [[[vright_2]]]
            type = VPaned
            parent = vright_1
            ratio = 0.25

            [[[right_2]]]
              type = Terminal
              parent = vright_2
              profile = ros-ft-sensor-shell    # (2,2) FT SENSOR

            [[[vright_3]]]
              type = VPaned
              parent = vright_2
              ratio = 0.333333

              [[[right_3]]]
                type = Terminal
                parent = vright_3
                profile = ros-gripper-serial-shell   # (3,2) GRIPPERS

              [[[vright_4]]]
                type = VPaned
                parent = vright_3
                ratio = 0.5

                [[[right_4]]]
                  type = Terminal
                  parent = vright_4
                  profile = ros-gripper-control-shell # (5,2) GRIP CTRL

                [[[right_5]]]
                  type = Terminal
                  parent = vright_4
                  profile = ros-safemotor-shell      # (4,2) SAFE MOTOR

###########################################
# WINDOW 2 (Monitor 1 – RIGHT) FULLSCREEN
# 2×2 tools grid:
# ┌───────────────┬───────────────┐
# │   RQT GRAPH   │  JUGGLER      │
# ├───────────────┼───────────────┤
# │ SYNC EXP      │  PLOTTER      │
# └───────────────┴───────────────┘
###########################################
[[[window2]]]
  type = Window
  parent = ""
  size = 1280,1024
  position = 3200:0
  fullscreen = True
  title = Cepheus – Monitor

  # Top-level horizontal split
  [[[childA]]]
    type = HPaned
    parent = window2
    position = 640

    # LEFT side (RQT graph over Autosync)
    [[[childA1]]]
      type = VPaned
      parent = childA
      position = 512

      [[[terminal10]]]
        type = Terminal
        parent = childA1
        profile = ros-rqt-graph          # RQT GRAPH

      [[[terminal11]]]
        type = Terminal
        parent = childA1
        profile = ros-autosync-shell     # SYNC EXPERIMENT (AUTOSYNC)

    # RIGHT side (PlotJuggler over plotter shell)
    [[[childA2]]]
      type = VPaned
      parent = childA
      position = 512

      [[[terminal12]]]
        type = Terminal
        parent = childA2
        profile = ros-plotjuggler        # JUGGLER

      [[[terminal13]]]
        type = Terminal
        parent = childA2
        profile = ros-converter-shell    # PLOTTER / BAG CONVERTER



    ###########################################
    # WINDOW 3 – Network diagnostics
    #
    # Top-left:   MTR to robot
    # Bottom-left: NLOAD (traffic)
    # Top-right:  iperf3 server on robot
    # Bottom-right: iperf3 client on host
    # Bottom full: BTOP (system overview)
    ###########################################
    [[[window3]]]
      type = Window
      parent = ""
      size = 1280,1024
      position = 4480:0
      fullscreen = True
      title = Cepheus – NetDiag

      [[[child10]]]
        type = VPaned
        parent = window3
        position = 512

        # TOP HALF: 2x2 grid (MTR/NLOAD, IPERF S/C)
        [[[child11]]]
          type = HPaned
          parent = child10
          position = 640

          # LEFT COLUMN: MTR (top) / NLOAD (bottom)
          [[[child11a]]]
            type = VPaned
            parent = child11
            position = 512

            [[[terminal20]]]
              type = Terminal
              parent = child11a
              profile = net-mtr

            [[[terminal21]]]
              type = Terminal
              parent = child11a
              profile = net-nload

          # RIGHT COLUMN: IPERF SERVER (top) / CLIENT (bottom)
          [[[child11b]]]
            type = VPaned
            parent = child11
            position = 512

            [[[terminal22]]]
              type = Terminal
              parent = child11b
              profile = net-iperf-server

            [[[terminal23]]]
              type = Terminal
              parent = child11b
              profile = net-iperf-client

        # BOTTOM HALF: BTOP full-width
        [[[terminal24]]]
          type = Terminal
          parent = child10
          profile = net-btop


[plugins]
